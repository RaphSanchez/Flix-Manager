<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">

    <system.webServer>

      <rewrite>
        <rules>

          <rule name="RedirectWwwToNoneWww" stopProcessing="true">
            <match url="(.*)"/>
            <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
              <add input="{HTTP_HOST}" pattern="^(www\.)(.*)$"/>
            </conditions>
            <action type="Redirect" url="https://{C:2}{REQUEST_URI}"
                    redirectType="Permanent"/>
          </rule>

          <rule name="RedirectAzureDomainToMain" stopProcessing="true">
            <match url="(.*)"/>
            <conditions logicalGrouping="MatchAny" trackAllCaptures="false">
              <add input="{HTTP_HOST}"
                   pattern="^(flix-manager\.azurewebsites\.net)(.*)$"/>
            </conditions>
            <action type="Redirect"
                    url="https://app.flix-manager.com{C:2}{REQUEST_URI}"
                    redirectType="Permanent"/>
          </rule>

        </rules>
      </rewrite>

      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" 
             resourceType="Unspecified" />
      </handlers>

      <aspNetCore processPath="dotnet" arguments=".\BlazorMovies.Server.dll" 
                  stdoutLogEnabled="false" 
                  stdoutLogFile="\\?\%home%\LogFiles\stdout" 
                  hostingModel="inprocess" />

    </system.webServer>
  </location>
</configuration>
<!--ProjectGuid: 06725e90-9e50-4c4f-8f5a-4e8dd44dcb7e-->

<!-- Custom web.config file for BlazorMovies - FlixManager web app.						-->
<!-- Uses pattern matching to include request URLs witha path; e.g., with a query		-->
<!-- string. This is the web.config file that I used for the app.						-->

